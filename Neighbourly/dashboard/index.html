<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neighborly - Dashboard</title>

    <link rel="manifest" href="../app.webmanifest">
    <link rel="icon" type="image/png" href="../images/icons/favicon-96x96.png" sizes="96x96">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/icons.css">
    <link rel="stylesheet" href="../css/utilities.css">
    <link rel="stylesheet" href="../css/modal.css">
    <link rel="stylesheet" href="../css/post.css">
    <link rel="stylesheet" href="../css/filters.css">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css"
        integrity="sha512-10/jx2EXwxxWqCLX/hHth/vu2KY3jCF70dCQB8TSgNjbCVAC/8vai53GfMDrO2Emgwccf2pJqxct9ehpzG+MTw=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Epilogue:wght@400;600&family=Mulish&display=swap"
        rel="stylesheet">

    <!--Toastify-->
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    <script src="https://cdn.jsdelivr.net/npm/toastify-js" defer></script>

    <!-- Firebase CDN -->
    <script src="https://www.gstatic.com/firebasejs/9.6.7/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.7/firebase-analytics-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.7/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.7/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.7/firebase-storage-compat.js"></script>

    <!-- SCRIPTS -->
    <script src="../js/config.js"></script>
    <script src="../js/utils.js"></script>
    <script src="../js/dashboard/main.js" defer></script>
    <script src="../js/post.js"></script>
    <script src="../js/modal.js"></script>
    <script src="../js/offline.js" defer></script>
    <script src="../js/Imageup.js" defer></script>
    <script src="../js/filters.js" defer></script>

    <script>
        if ('serviceWorker' in navigator) { //if browser supports Service worker
            // assuming sw.js is our service worker file in the same directory
            navigator.serviceWorker.register('../sw.js')
                .then(function (reg) {
                    console.log(`Service Worker Registration`);
                })
                .catch(function (error) {
                    console.log(`Service Worker Error (${error})`);
                });
        }
    </script>

    <script>
        const uid = sessionStorage.getItem("uid");

        if (uid == null) {
            window.location.href = `${BASE_URL}/login.html`;
        }
    </script>
</head>

<body>
    <div class="offline"></div>
    <div class="wrapper">
        <header class="dash-header">

            <h1>
                <img src="../images/neighbourly-logo.svg" alt="Neighborly Logo" class="desktop">
                <img src="../images/neighbourly-mobile-logo.svg" alt="Neighborly Logo" class="mobile">
                <span class="visually-hidden">Neighborly</span>
            </h1>
            <nav>
                <div class="menu-icons">

                        <li><i class="fa-solid fa-house-chimney"><a href="#home" class="hide-text">Home</a></i></li>

                        <li><i class="fa-regular fa-comment"><a href="#discuss" class="hide-text">Discuss</a></i></li>

                        <li><i class="fa-regular fa-bell" ></i><a href="#info" class="hide-text">Info</a></li>

                </div>

                <div class="menu-search">
                    <input type="text" placeholder="search">
                    <button></button>
                </div>

                <!-- <li><a href="login.html" method="post" class="">Notifications</a></li>
                    <li><a href="login.html" method="post" class="">Messages</a></li> -->

                <div class="personal-area">
                    <img src="" alt="">
                    <li><a href="#" id="logout">Logout</a></li>
                    <!-- <li>
                        <a href="#" id="logout">
                            <i class="fas fa-sign-out"></i>
                        </a>
                    </li> -->
                </div>
            </nav>
        </header>

        <main>
            <div class="map-container">
                <h2>Dashboard</h2>
                <div id="map"></div>
                <input type="range" min="1" max="5" value="5" class="slider" id="myRange">
                <div>Area Radius <span id="radiusKm">5</span>km</div>
                <button id="createPostBtn">New Post</button>
            </div>

            <section class="sidebar filters-container">
                <div class="filters-title flex justify-s-between">
                    <h1 class="flex align-center">Filters</h1>
                    <span onclick="filterSection.classList.add('open');" class="open-filters pointer flex align-center justify-center">
                        <i class="fa-solid fa-gear"></i>
                    </span>
                </div>
                <div id="filterSection" class="filters">
                    <div class="mobile-filters-header flex justify-s-between">
                        <h1 class="flex align-center">Filters</h1>
                        <span onclick="filterSection.classList.remove('open');" class="close-filters pointer">
                            <i class="fas fa-times"></i>
                        </span>
                    </div>
                    <div class="filter-help-request">
                        <div style="background-color: #f1efef">
                            <h4>Working filters (rest is WIP)</h4>
                            <div id="filter-input-wrapper">
                                <label for="posts">Choose Post Type:
                                    <select name="posts" id="posts" onchange="filterSelection(this.value)">
                                        <option value="all">All Posts</option>
                                        <option value="recommendation">Recommendation</option>
                                        <option value="help_request">Help Request</option>
                                        <option value="giveaway">Giveaway</option>
                                    </select></label>
                                <label for="helprequest_type">Choose Help request type:
                                    <select name="helprequest_type" id="helprequest_type" onchange="filterhelptype(this.value)">
                                        <option value="">Free</option>
                                        <option value="paid">Payment Required</option>
                                    </select>
                                </label>
                            </div>
                        </div>

                        <div class="title-filter">
                            <h4>Help Request</h4>
                        </div>

                        <div class="selected-filters">
                            <div class="header-selected-filters">
                                <h4>Selected Filters</h4>
                                <span>Clear</span>
                            </div>

                            <div class="chosen-selected-filters">
                                <p>Paid</p>
                                <p>Appliances</p>
                                <p>5 km</p>
                            </div>
                        </div>

                        <div class="payment">
                            <h4>Payment</h4>

                            <input type="checkbox">
                            Paid </input><br>

                            <input type="checkbox">
                            Unpaid </input><br>


                        </div>

                        <div class="area">
                            <h4>Area</h4>
                            <p>5km</p>
                        </div>

                        <div class="categories">
                            <h4>Categories</h4>

                            <input type="checkbox">
                            Gardening </input><br>

                            <input type="checkbox">
                            Grocery Shopping </input><br>

                            <input type="checkbox">
                            Installation </input><br>

                            <input type="checkbox">
                            Cleaning </input><br>

                            <input type="checkbox">
                            Babysitting </input><br>

                            <input type="checkbox">
                            Other </input><br>


                        </div>
                    </div>
                </div>
            </section>

            <div id="feed" class="feed margin-t-1r"></div>


            <label for="imgfile" class="visually-hidden">
                <i class="fas fa-camera"></i>
                <input type="file" id="imgfile" name="imgfile" accept="image/*" />
            </label>
            <div id="imageUploadHandler" class="dashboardImageupload visually-hidden">
                <div>
                    <span onclick="closeCamPreview();" class="closeImageUploader pointer">
                        <i class="fas fa-times"></i>
                    </span>

                    <div class="imagecanvas">
                        <img id="upimage" alt="">
                        <video id="video" width="320" height="240" autoplay playsinline></video>
                        <br>
                        <canvas id="canvas" width="320" height="240" style="display: none;"></canvas>
                    </div>
                    <button class="uploadimgbtn visually-hidden">Upload Post Image</button>
                    <button class="profilebtn visually-hidden">Upload Profile Image</button>

                    <div class="imagecontrols">
                        <button id="start" class="webcam-btn" style="display: none;">Start Camera</button>
                        <button id="snap" class="webcam-btn">Snap Photo</button>
                        <button id="stop" class="webcam-btn">Stop Camera</button>
                    </div>
                </div>
            </div>
        </main>


        <div id="modal"></div>

        <footer>
            <p>Copyright &copy 2022. Neighborly. All Rights Reserved.</p>
        </footer>
    </div>

    <!-- Async script executes immediately and must be after any DOM elements used in callback. -->
    <script
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBnwEPQPWFBiXDhX_2pJp-wQdcyoeX_eNQ&callback=initMap&v=weekly"
        async></script>
</body>

</html>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neighborly - Dashboard</title>

    <link rel="manifest" href="../app.webmanifest">
    <link rel="icon" type="image/png" href="../images/icons/favicon-96x96.png" sizes="96x96">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/icons.css">
    <link rel="stylesheet" href="../css/utilities.css">
    <link rel="stylesheet" href="../css/modal.css">
    <link rel="stylesheet" href="../css/post.css">

    <!-- Font Awesome -->
    <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css' integrity='sha512-+4zCK9k+qNFUR5X+cKL9EIR+ZOhtIloNl9GIKS57V1MyNsYpYcUrUeQc9vNfzsWfV28IaLL3i96P9sdNyeRssA==' crossorigin='anonymous' />

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Epilogue:wght@400;600&family=Mulish&display=swap" rel="stylesheet">

    <!-- Firebase CDN -->
    <script src="https://www.gstatic.com/firebasejs/9.6.7/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.7/firebase-analytics-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.7/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.7/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.7/firebase-storage-compat.js"></script>
  
    <!-- SCRIPTS -->
    <script src="../js/config.js"></script>
    <script src="../js/utils.js" ></script>
    <script src="../js/dashboard/main.js" defer></script>
    <script src="../js/post.js" ></script>
    <script src="../js/modal.js" ></script>
    <script src="../js/offline.js" defer></script>
    <script src="../js/Imageup.js"defer></script>

    <script>
        if ('serviceWorker' in navigator) {  //if browser supports Service worker
            // assuming sw.js is our service worker file in the same directory
            navigator.serviceWorker.register('../sw.js')
            .then( function (reg) {
                console.log(`Service Worker Registration`);
            })
            .catch( function (error) {
                console.log(`Service Worker Error (${error})`);       
            });
        }
    </script>

    <script>
        const uid = sessionStorage.getItem("uid");

        if(uid == null) {
            window.location.href = `${BASE_URL}/login.html`;
        }
    </script>
</head>
<body>
    <div class="offline"></div>
    <div class="wrapper">
        <header>
            <h1>
                <img src="../images/neighbourly-logo.svg" alt="Neighborly Logo" class="desktop">
                <img src="../images/neighbourly-mobile-logo.svg" alt="Neighborly Logo" class="mobile">
                <span class="visually-hidden">Neighborly</span>
            </h1>
            <nav>
                <ul>
                    <!-- <li><a href="login.html" method="post" class="">Notifications</a></li>
                    <li><a href="login.html" method="post" class="">Messages</a></li> -->
                    <li><a href="#" id="logout">Logout</a></li>
                    <li>
                        <a href="#" id="logout">
                            <i class="fas fa-sign-out"></i>
                        </a>
                    </li>
                </ul>
            </nav>
        </header>

        <main>
            <h2>Dashboard</h2>
            <div id="map"></div>

            <input type="range" min="1" max="5" value="5" class="slider" id="myRange">
            <div>Area Radius <span id="radiusKm">5</span>km</div>
            <button id="createPostBtn">New Post</button>
            <div id="feed" class="margin-t-1r"></div>
        </main>

        <section class="sidebar">
            <h2>New Help Request</h2> 
            <div>List of help request from firebase.</div>
        </section>

        <div id="modal"></div>
        <div class="dashboardImageupload">
            <label for="imgfile">
                <i class="fas fa-camera"></i>
            <input type="file" id="imgfile" name="imgfile" accept="image/*" /></label>
            <button class="uploadimgbtn">Upload Image</button>
            <div class="imagecontrols">
                <img id="upimage" alt="">
                <button id="start" class="webcam-btn">Start Camera</button>
                <button id="snap" class="webcam-btn">Snap Photo</button>
                <button id="stop" class="webcam-btn">Stop Camera</button>
            </div>
        <div class="imagecanvas">
            <video id="video" width="320" height="240" autoplay playsinline></video>
            <br />
            <canvas id="canvas" width="320" height="240" style="display: none;"></canvas>
            </div>
            </div>

        <footer>
            <p>Copyright &copy 2022. Neighborly. All Rights Reserved.</p>
        </footer>
    </div>

    <!-- Async script executes immediately and must be after any DOM elements used in callback. -->
    <script
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBnwEPQPWFBiXDhX_2pJp-wQdcyoeX_eNQ&callback=initMap&v=weekly"
      async
    ></script>
</body>
</html>